language: python
python:
  - 2.7
  - 3.4
sudo: false
addons:
  apt:
    packages:
    - libev4
    - libev-dev
notifications:
  email:
    - tbarbugli@gmail.com
    - thierryschellenbach@gmail.com
cache:
  directories:
    - $HOME/.pip-cache/
env:
  - DEP="redis"
  - DEP="cassandra2"
  - DEP="cassandra3"
services:
  - redis
  - cassandra
before_install:
  - git clone https://github.com/tbarbugli/stream_framework_example.git pinterest_example
before_script:
  - echo 'DROP KEYSPACE test_stream_framework;' | /usr/local/cassandra/bin/cqlsh;
install:
  - easy_install -U distribute
  - pip install -e .[$DEP]
  - pip freeze
script:
  - CQLENG_ALLOW_SCHEMA_MANAGEMENT="yes" py.test -sl --tb=short stream_framework/tests
